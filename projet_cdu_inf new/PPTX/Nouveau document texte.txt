Voici une solution claire et structur√©e pour cr√©er ton r√¥le admin avec acc√®s complet et une page admin centralis√©e.
________________________________________
‚úÖ 1. Cr√©er un r√¥le ADMIN dans ta base
Si ce n‚Äôest pas d√©j√† fait, ajoute un r√¥le ADMIN dans ta table des r√¥les :
sql
CopierModifier
INSERT INTO MG_ROLE (ID_ROLE, NOM_ROLE)
VALUES ('ADMIN', 'Administrateur');
Et attribue-le √† ton utilisateur admin dans ta table MGUSER ou gestion des utilisateurs.
________________________________________
‚úÖ 2. Adapter ton check_rights
Actuellement, tu utilises :
python
CopierModifier
if not check_rights(id_role, id_ecran, action='SELECT'):
    flash("‚õî Acc√®s refus√©", "error")
    return redirect('/')
üîß Modifie la fonction check_rights pour retourner toujours True si id_role == 'ADMIN'.
Exemple dans ton utils.py :
python
CopierModifier
def check_rights(id_role, id_ecran, id_objet=None, action='SELECT'):
    if id_role == 'ADMIN':
        return True
    # ... logique existante
________________________________________
‚úÖ 3. Cr√©er une page admin
Dans ton blueprint admin (exemple admin.py) :
python
CopierModifier
from flask import Blueprint, render_template, session, redirect, url_for
 
admin_bp = Blueprint('admin', __name__, url_prefix='/admin')
 
@admin_bp.route('/')
def admin_home():
    if 'id_role' not in session or session['id_role'] != 'ADMIN':
        return redirect('/')
 
    return render_template('admin_home.html')
________________________________________
‚úÖ 4. Cr√©e le template admin_home.html
Voici un exemple complet et √©pur√© :
html
CopierModifier
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Admin Dashboard</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
  <h1>Admin Dashboard</h1>
 
  <ul>
    <li><a href="{{ url_for('inf.show_form') }}">INF Formulaire</a></li>
    <li><a href="{{ url_for('inf.recap_global') }}">R√©capitulatif Global</a></li>
    <li><a href="{{ url_for('director.director_dashboard') }}">Director Dashboard</a></li>
  </ul>
 
  <p><a href="{{ url_for('logout') }}">D√©connexion</a></p>
</body>
</html>
________________________________________
üîß 5. Adapter tes routes existantes
Pour tous tes contr√¥les d‚Äôacc√®s (check_rights) :
‚Ä¢	Pas besoin de modifier chaque route puisque la fonction check_rights renvoie toujours True si admin.
________________________________________
‚úÖ 6. R√©sultat
‚úîÔ∏è Ton utilisateur ADMIN peut acc√©der sans restriction √† toutes les pages.
‚úîÔ∏è Il dispose d‚Äôune page d‚Äôaccueil admin pour naviguer rapidement vers :
‚Ä¢	Formulaire INF
‚Ä¢	R√©capitulatif Global
‚Ä¢	Director Dashboard
________________________________________
üí° 7. Bonus : s√©curit√©
‚Ä¢	V√©rifie bien que id_role est stock√© en session apr√®s login.
‚Ä¢	Ajoute un lien vers /admin visible uniquement si id_role == 'ADMIN'.
Exemple dans ta navbar :
html
CopierModifier
{% if session['id_role'] == 'ADMIN' %}
  <a href="{{ url_for('admin.admin_home') }}">Admin</a>
{% endif %}
 
